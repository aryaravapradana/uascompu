<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>UAS Cardiovascular Risk</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  <div class="container">
<form method="post">
  <fieldset>
    <legend>Hitung Target Jogging</legend>
    <label>Umur: <input type="number" name="umur" required></label>
    <label>Gender:
      <select name="gender" required>
        <option value="pria">Pria</option>
        <option value="wanita">Wanita</option>
      </select>
    </label>
    <button type="submit">Hitung Target</button>
  </fieldset>
</form>

{% if target %}
  <p><strong>Target Jogging Anda:</strong> {{ target }} meter</p>
{% endif %}

    <h1>Evaluasi Risiko Penyakit Kardiovaskular</h1>
    <form action="/result" method="post">

      <!-- Data dasar -->
      <label>Umur:
        <input type="number" name="umur" min="1" max="120" required />
      </label>
      <label>Gender:
        <select name="gender" required>
          <option value="pria">Pria</option>
          <option value="wanita">Wanita</option>
        </select>
      </label>

      <!-- Numeric inputs -->
      <label>Berat (kg):
        <input type="number" name="berat" min="30" max="200" step="0.1" required />
      </label>
      <label>Tinggi (cm):
        <input type="number" name="tinggi" min="100" max="250" step="0.1" required />
      </label>
      <label>HR saat istirahat (bpm):
        <input type="number" name="hr_rest" min="30" max="200" required />
      </label>
      <label>HR saat jalan santai (bpm):
        <input type="number" name="hr_walk" min="30" max="200" required />
      </label>
      <label>Tekanan darah sistolik:
        <input type="number" name="bp_sys" min="80" max="250" required />
      </label>
      <label>Tekanan darah diastolik:
        <input type="number" name="bp_dia" min="40" max="150" required />
      </label>
      <label>Frekuensi olahraga/minggu:
        <input type="number" name="exercise_freq" min="0" max="14" required />
      </label>

      <!-- Jogging target -->
      <fieldset>
        <legend>Jogging</legend>
        <p>Apakah berhasil mencapai target?</p>
        <label><input type="radio" name="jog_yes" value="ya" required /> Ya</label>
        <label><input type="radio" name="jog_yes" value="tidak" /> Tidak</label>
        <div id="not-reached" style="display:none;">
          <label>Jarak tempuh sebelum menyerah (m):
            <input type="number" name="jarak_tempuh" min="0" />
          </label>
        </div>
        <div id="reached-hr" style="display:none;">
          <label>HR setelah jogging (bpm):
            <input type="number" name="hr_jog" min="50" max="220" />
          </label>
        </div>
      </fieldset>

      <!-- 25 pertanyaan ya/tidak sesuai logic.py -->
      <fieldset>
        <legend>Pertanyaan Kesehatan</legend>
        {% for key, text in {
          'riwayat_keluarga': 'Memiliki anggota keluarga (ayah, ibu, saudara) yang pernah mengalami penyakit jantung atau serangan jantung',
          'nyeri_dada': 'Sering merasakan nyeri atau tekanan di bagian dada, terutama saat aktivitas',
          'sesak_napas': 'Mudah sesak napas bahkan saat melakukan aktivitas ringan seperti naik tangga atau berjalan',
          'pingsan': 'Kejadian pingsan atau hampir pingsan tanpa sebab yang jelas',
          'tekanan_darah_tinggi': 'Pernah didiagnosis memiliki tekanan darah tinggi oleh dokter',
          'diabetes': 'Pernah didiagnosis menderita diabetes (gula darah tinggi)',
          'merokok': 'Saat ini merokok atau memiliki riwayat merokok berat?',
          'alkohol': 'Rutin mengonsumsi alkohol dalam jumlah sedang hingga berat',
          'jantung_berdebar': 'Sering merasakan jantung berdebar cepat, tidak beraturan, atau terasa "loncat"',
          'bengkak_kaki': 'Sering mengalami pembengkakan pada kaki, pergelangan, atau perut',
          'sering_lelah': 'Merasa mudah lelah meskipun sudah cukup istirahat',
          'kolesterol_tinggi': 'Pernah didiagnosis memiliki kolesterol tinggi',
          'jarang_olahraga': 'Jarang atau hampir tidak pernah berolahraga dalam seminggu',
          'stres_berlebihan': 'Merasa stres berat atau cemas secara terus-menerus dalam kehidupan sehari-hari',
          'sulit_tidur': 'Sering mengalami kesulitan tidur nyenyak atau sering terbangun di malam hari',
          'pusing_saat_berdiri': 'Sering merasa pusing atau limbung saat bangun dari duduk atau berbaring',
          'keringat_tanpa_aktivitas': 'Sering berkeringat berlebihan tanpa melakukan aktivitas berat',
          'sleep_apnea': 'Mendengkur keras dan berhenti bernapas sesaat saat tidur (sleep apnea)',
          'autoimun': 'Memiliki penyakit autoimun seperti lupus atau rheumatoid arthritis',
          'tiroid': 'Memiliki gangguan tiroid seperti hipertiroid atau hipotiroid',
          'kesemutan': 'Sering merasakan kesemutan atau mati rasa pada kaki atau tangan Anda',
          'sakit_kepala': 'Sering mengalami sakit kepala yang cukup berat, terutama jika disertai tekanan darah tinggi',
          'junkfood': 'Sering mengonsumsi makanan cepat saji, gorengan, atau makanan tinggi lemak',
          'tinggi_gula': 'Hasil tes gula darah Anda sering menunjukkan kadar yang tinggi'
        }.items() %}
          <label><input type="checkbox" name="{{ key }}"> {{ text }}</label><br>
        {% endfor %}
      </fieldset>

      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    // Toggle fieldset Jogging
    const radios = document.getElementsByName('jog_yes');
    const nr = document.getElementById('not-reached');
    const hr = document.getElementById('reached-hr');
    radios.forEach(r => r.addEventListener('change', () => {
      if (r.value === 'ya' && r.checked) {
        hr.style.display = 'block';
        nr.style.display = 'none';
      } else if (r.value === 'tidak' && r.checked) {
        nr.style.display = 'block';
        hr.style.display = 'none';
      }
    }));
  </script>
</body>
</html>
